<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<HTML
><HEAD
><TITLE
>slon</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.79"><LINK
REV="MADE"
HREF="mailto:slony1-general@lists.slony.info"><LINK
REL="HOME"
TITLE="Slony-I 1.2.23 Documentation"
HREF="index.html"><LINK
REL="UP"
TITLE="Core Slony-I Programs"
HREF="commandreference.html"><LINK
REL="PREVIOUS"
TITLE="Core Slony-I Programs"
HREF="commandreference.html"><LINK
REL="NEXT"
HREF="runtime-config.html"><LINK
REL="STYLESHEET"
TYPE="text/css"
HREF="stylesheet.css"><META
HTTP-EQUIV="Content-Type"
CONTENT="text/html; charset=UTF-8"><META
NAME="creation"
CONTENT="2012-02-03T00:30:07"></HEAD
><BODY
CLASS="REFENTRY"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="5"
ALIGN="center"
VALIGN="bottom"
><SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> 1.2.23 Documentation（日本語訳）</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="commandreference.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="top"
><A
HREF="commandreference.html#COMMANDREFERENCE"
>Fast Backward</A
></TD
><TD
WIDTH="60%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
HREF="runtime-config.html"
>Fast Forward</A
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="top"
><A
HREF="runtime-config.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="SLON"
></A
><SPAN
CLASS="APPLICATION"
>slon</SPAN
></H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN8171"
></A
><H2
><span class="ORIGIN">Name</span> 名称</H2
><span class="ORIGIN"><SPAN
CLASS="APPLICATION"
>slon</SPAN
>&nbsp;--&nbsp;   <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> daemon
  </span> slon &nbsp;--&nbsp; Slony-Iのデーモン</DIV
><A
NAME="AEN8176"
></A
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN8178"
></A
><H2
><span class="ORIGIN">Synopsis</span> 使用方法</H2
><P
><TT
CLASS="COMMAND"
>slon</TT
> [<TT
CLASS="REPLACEABLE"
><I
>option</I
></TT
>...] [<TT
CLASS="REPLACEABLE"
><I
>clustername</I
></TT
>] [<TT
CLASS="REPLACEABLE"
><I
>conninfo</I
></TT
>]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN8187"
></A
><H2
><span class="ORIGIN">Description</span> 説明</H2
><P
><span class="ORIGIN">   <SPAN
CLASS="APPLICATION"
>slon</SPAN
> is the daemon application that
   <SPAN
CLASS="QUOTE"
>"runs"</SPAN
> <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> replication.  A
   <SPAN
CLASS="APPLICATION"
>slon</SPAN
> instance must be run for each node
   in a <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> cluster.
  </span> slonはSlony-Iのレプリケーションを実際に動作させるデーモン・アプリケーションです。Slony-Iクラスタに属する各ノードでslonを実行させなければなりません。</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="R1-APP-SLON-3"
></A
><H2
><span class="ORIGIN">Options</span> オプション</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
><TT
CLASS="OPTION"
>-d</TT
><TT
CLASS="REPLACEABLE"
><I
> log_level</I
></TT
></DT
><DD
><P
><span class="ORIGIN">      The <TT
CLASS="ENVAR"
>log_level</TT
> specifies which levels of debugging messages
      <SPAN
CLASS="APPLICATION"
>slon</SPAN
> should display when logging its
      activity.     </span> slonがログを記録しようとした際に、どのレベルのものを記録するべきかを <TT CLASS="ENVAR">log_level</TT> にて指定します。</P
><P
><span class="ORIGIN">      The nine levels of logging are:</span> ログレベルには次の９つのものがあります：
      <P
></P
></P><UL
><LI
><P
>Fatal</P
></LI
><LI
><P
>Error</P
></LI
><LI
><P
>Warn</P
></LI
><LI
><P
>Config</P
></LI
><LI
><P
>Info</P
></LI
><LI
><P
>Debug1</P
></LI
><LI
><P
>Debug2</P
></LI
><LI
><P
>Debug3</P
></LI
><LI
><P
>Debug4</P
></LI
></UL
><P>
     </P
><P
> <span class="ORIGIN">The first five non-debugging log levels (from Fatal to
     Info) are <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>always</I
></SPAN
> displayed in the logs.  In
     early versions of <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
>, the <SPAN
CLASS="QUOTE"
>"suggested"</SPAN
>
     <TT
CLASS="ENVAR"
>log_level</TT
> value was 2, which would list output at
     all levels down to debugging level 2.  In <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> version 2, it
     is recommended to set <TT
CLASS="ENVAR"
>log_level</TT
> to 0; most of the
     consistently interesting log information is generated at levels
     higher than that. </span> 最初の５つのデバッグではないログレベル（FatalからInfoまで）は「常に」出力されます。Slony-Iの初期バージョンでは、推奨されるログレベルの値は２でした。Slony-Iバージョン2では、ログレベルを0にすることが推奨されています。この設定をしても、常に必要とされるログの情報はレベル0よりも高いレベルで生成されるので記録は為されます。</P
></DD
><DT
><TT
CLASS="OPTION"
>-s</TT
><TT
CLASS="REPLACEABLE"
><I
> SYNC check interval</I
></TT
></DT
><DD
><P
>      <span class="ORIGIN">The <TT
CLASS="ENVAR"
>sync_interval</TT
>, measured in milliseconds,
      indicates how often <SPAN
CLASS="APPLICATION"
>slon</SPAN
> should check
      to see if a <TT
CLASS="COMMAND"
>SYNC</TT
> should be introduced.
      Default is 2000 ms.  The main loop in
      <CODE
CLASS="FUNCTION"
>sync_Thread_main()</CODE
> sleeps for intervals of
      <TT
CLASS="ENVAR"
>sync_interval</TT
> milliseconds between iterations.
     </span> <TT CLASS="ENVAR">sync_interval</TT> にて、slonがSYNCイベントをチェックする間隔（ミリ秒）を指定することができます。デフォルトは2000ミリ秒です。slonの sync_Thread_main() におけるメインループでは、通信の合間にここで設定されたミリ秒だけスリープします。</P
><P
>      <span class="ORIGIN">Short sync check intervals keep the origin on a <SPAN
CLASS="QUOTE"
>"short
      leash"</SPAN
>, updating its subscribers more frequently.  If you
      have replicated sequences that are frequently updated
      <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>without</I
></SPAN
> there being tables that are
      affected, this keeps there from being times when only sequences
      are updated, and therefore <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>no</I
></SPAN
> syncs take
      place
     </span> 短い間隔でSYNCイベントをチェックさせることは、サブスクライバの更新をより頻繁にやらなければならないため、オリジンのサーバを「鎖で束縛された」状態にしてしまいます。頻繁に更新されるシーケンスで、テーブルのデータに影響を与えないものを複製している場合は、そのシーケンスが更新されただけの時はSYNCイベントが発生しないため、この設定（訳注：SYNCチェックの頻度を高める設定）は時間を食いません。</P
><P
>      <span class="ORIGIN">If the node is not an origin for any replication set, so no
      updates are coming in, it is somewhat wasteful for this value to
      be much less the <TT
CLASS="ENVAR"
>sync_interval_timeout</TT
> value.
     </span> どのレプリケーションセットにおいてもオリジンの役割を担っていないノードにおいては、更新は発生しないため、この値を <TT CLASS="ENVAR">sync_interval_timeout</TT> よりずっと小さくすることは全くの無駄であります。</P
></DD
><DT
><TT
CLASS="OPTION"
>-t</TT
><TT
CLASS="REPLACEABLE"
><I
> SYNC
    interval timeout</I
></TT
></DT
><DD
><P
>      <span class="ORIGIN">At the end of each <TT
CLASS="ENVAR"
>sync_interval_timeout</TT
> timeout
      period, a <TT
CLASS="COMMAND"
>SYNC</TT
> will be generated on the
      <SPAN
CLASS="QUOTE"
>"local"</SPAN
> node even if there has been no replicable
      data updated that would have caused a
      <TT
CLASS="COMMAND"
>SYNC</TT
> to be generated. </span> <TT CLASS="ENVAR">sync_interval_timeout</TT> の期間を迎える度に、SYNCイベントがローカルノードで生成されます。たとえレプリケーションするべきデータが無かったとしてもです。</P
><P
> <span class="ORIGIN">If application activity ceases, whether because the
     application is shut down, or because human users have gone home
     and stopped introducing updates, the <A
HREF="slon.html"
><SPAN
CLASS="APPLICATION"
>slon</SPAN
></A
> will iterate away,
     waking up every <TT
CLASS="ENVAR"
>sync_interval</TT
> milliseconds, and,
     as no updates are being made, no <TT
CLASS="COMMAND"
>SYNC</TT
> events
     would be generated.  Without this timeout parameter,
     <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>no</I
></SPAN
> <TT
CLASS="COMMAND"
>SYNC</TT
> events would be
     generated, and it would appear that replication was falling
     behind. </span> もしアプリケーションの活動が停止してしまっても、アプリケーション（訳注：PostgreSQLに接続するアプリケーションを指す。slonを指す訳では無い）がシャットダウンしたのか、それとも人間が帰宅してしまって更新が為されなくなったのかに関わらず、slonは <TT CLASS="ENVAR">sync_interval</TT>ミリ秒ごとに目覚めますがもしも更新が無ければSYNCイベントを発生させません。本設定による動作が無ければ、SYNCイベントが全く生成されないことも発生しうることになり、この時はレプリケーションが停止されていると見なされてもおかしくはありません。</P
><P
> <span class="ORIGIN">The <TT
CLASS="ENVAR"
>sync_interval_timeout</TT
> value will lead
     to eventually generating a <TT
CLASS="COMMAND"
>SYNC</TT
>, even though
     there was no real replication work to be done.  The lower that
     this parameter is set, the more frequently <A
HREF="slon.html"
><SPAN
CLASS="APPLICATION"
>slon</SPAN
></A
> will generate
     <TT
CLASS="COMMAND"
>SYNC</TT
> events when the application is not
     generating replicable activity; this will have two effects:</span> <TT CLASS="ENVAR">sync_interval_timeout</TT>の設定値によって、複製すべきデータが無かったとしても、SYNCイベントは結局生成されることになります。複製すべきデータが生成されない局面においては、この値が小さく設定されているほど、slonはより多くのSYNCイベントを生成します。このことは次の２つのことを引き起こします：</P
><P
></P
><UL
><LI
><P
> <span class="ORIGIN">The system will do more replication work.</span> レプリケーションのために、システムにより大きな負荷がかかるようになります。</P
><P
> <span class="ORIGIN">(Of course, since there is no application load on the
      database, and no data to replicate, this load will be very easy
      to handle.  </span>（もっとも、この現象が発生するのは、アプリケーションによるデータベースへの負荷や複製の負荷などが無い状況においてですから、ここで問題視している負荷というのは大した問題にはなりません。）</P
></LI
><LI
><P
> <span class="ORIGIN">Replication will appear to be kept more
      <SPAN
CLASS="QUOTE"
>"up to date."</SPAN
></span> レプリケーションがより最新のものに近いようになります。</P
><P
> <span class="ORIGIN">(Of course, since there is no replicable activity going
      on, being <SPAN
CLASS="QUOTE"
>"more up to date"</SPAN
> is something of a
      mirage.) </span> （もちろん、レプリケーションを必要とするデータが発生しない環境においては、「より最新のものに近い」というのは意味の無いことです。）</P
></LI
></UL
><P
>      <span class="ORIGIN">Default is 10000 ms and maximum is 120000 ms. By default, you
      can expect each node to <SPAN
CLASS="QUOTE"
>"report in"</SPAN
> with a
      <TT
CLASS="COMMAND"
>SYNC</TT
> every 10 seconds.
     </span> デフォルト値は10000ミリ秒で、最大120000ミリ秒まで指定することができます。デフォルトでは、各ノードは10秒ごとにSYNCを確認することになります。</P
><P
>      <span class="ORIGIN">Note that <TT
CLASS="COMMAND"
>SYNC</TT
> events are also generated on
      subscriber nodes.  Since they are not actually generating any
      data to replicate to other nodes, these <TT
CLASS="COMMAND"
>SYNC</TT
>
      events are of not terribly much value.
     </span> SYNCイベントはサブスクライバでも生成されることに気をつけて下さい。サブスクライバでは複製が必要なデータが生成されることはありませんので、これらのSYNCイベントは大した数にはなりません。</P
></DD
><DT
><TT
CLASS="OPTION"
>-g</TT
><TT
CLASS="REPLACEABLE"
><I
> group size</I
></TT
></DT
><DD
><P
>      <span class="ORIGIN">This controls the maximum <TT
CLASS="COMMAND"
>SYNC</TT
> group size,
      <TT
CLASS="ENVAR"
>sync_group_maxsize</TT
>; defaults to 6.  Thus, if a
      particular node is behind by 200 <TT
CLASS="COMMAND"
>SYNC</TT
>s, it
      will try to group them together into groups of a maximum size of
      <TT
CLASS="ENVAR"
>sync_group_maxsize</TT
>.  This can be expected to
      reduce transaction overhead due to having fewer transactions to
      <TT
CLASS="COMMAND"
>COMMIT</TT
>.
     </span> この <TT CLASS="ENVAR">sync_group_maxsize</TT> によって、SYNCのグループの最大数を設定できます。デフォルトは6です。あるノードが200SYNCイベント分だけ複製が遅れている状況では、最大この<TT CLASS="ENVAR">sync_group_maxsize</TT>個を持つグループに分けて処理しようとします。この動作によって、COMMIT回数を削減することにつながり、トランザクション処理のオーバーヘッドを軽減できると期待されています。</P
><P
>      <span class="ORIGIN">The default of 6 is probably suitable for small systems that can
      devote only very limited bits of memory to
      <SPAN
CLASS="APPLICATION"
>slon</SPAN
>.  If you have plenty of memory,
      it would be reasonable to increase this, as it will increase the
      amount of work done in each transaction, and will allow a
      subscriber that is behind by a lot to catch up more quickly.
     </span> デフォルト値の6という値は、slonに割り当てられるメモリ領域が僅かしかないような小規模なシステムに最適な値です。潤沢なメモリを持つ環境では、この値を増加させるのが妥当でしょう。これによって各トランザクションにおける処理量が増加し、複製が遅れているサブスクライバもより素早くプロバイダに追いつくことができるでしょう。</P
><P
>      <span class="ORIGIN">Slon processes usually stay pretty small; even with large value
      for this option, <SPAN
CLASS="APPLICATION"
>slon</SPAN
> would be
      expected to only grow to a few MB in size.
     </span> slonのプロセスが消費するメモリはとても小さいものであり、この設定を大きくしたとしても、高々数MBytes程度です。</P
><P
>      <span class="ORIGIN">The big advantage in increasing this parameter comes from
      cutting down on the number of transaction
      <TT
CLASS="COMMAND"
>COMMIT</TT
>s; moving from 1 to 2 will provide
      considerable benefit, but the benefits will progressively fall
      off once the transactions being processed get to be reasonably
      large.  There isn't likely to be a material difference in
      performance between 80 and 90; at that point, whether
      <SPAN
CLASS="QUOTE"
>"bigger is better"</SPAN
> will depend on whether the
      bigger set of <TT
CLASS="COMMAND"
>SYNC</TT
>s makes the
      <TT
CLASS="ENVAR"
>LOG</TT
> cursor behave badly due to consuming more
      memory and requiring more time to sortt.
     </span> この値を大きくすることによる利点は、トランザクションのコミット操作を減らすことによります。設定値を1から2に変更することは利点を十分にもたらすと考えられますが、この利点はトランザクションがある程度大きくなってきたところで頭打ちになります。この意味で、80と90との間には大きなパフォーマンスの差はありません。設定値が「大きいほど良い」かどうかは、より多くのメモリを使用することとソートに費やす時間が増加することによるLOGカーソルが、巨大なSYNCイベントのグループによってより悪い挙動をするかどうかによります。</P
><P
>      <span class="ORIGIN">In <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> version 1.0, <SPAN
CLASS="APPLICATION"
>slon</SPAN
> will
      always attempt to group <TT
CLASS="COMMAND"
>SYNC</TT
>s together to
      this maximum, which <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>won't</I
></SPAN
> be ideal if
      replication has been somewhat destabilized by there being very
      large updates (<SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>e.g.</I
></SPAN
> - a single transaction
      that updates hundreds of thousands of rows) or by
      <TT
CLASS="COMMAND"
>SYNC</TT
>s being disrupted on an origin node with
      the result that there are a few <TT
CLASS="COMMAND"
>SYNC</TT
>s that
      are very large.  You might run into the problem that grouping
      together some very large <TT
CLASS="COMMAND"
>SYNC</TT
>s knocks over a
      <SPAN
CLASS="APPLICATION"
>slon</SPAN
> process.  When it picks up
      again, it will try to process the same large grouped set of
      <TT
CLASS="COMMAND"
>SYNC</TT
>s, and run into the same problem over and
      over until an administrator interrupts this and changes the
      <TT
CLASS="OPTION"
>-g</TT
> value to break this <SPAN
CLASS="QUOTE"
>"deadlock."</SPAN
>
     </span> Slony-Iのバージョン1.0では、slonは常にSYNCを最大数までグループ化しようとします。この挙動は、例えば１つのトランザクションで数十万行もの更新をするなどの非常に巨大な更新が行われることや、少数の非常に巨大なSYNCでオリジンノードが混乱している状況によってレプリケーションがある種の不安定な状況に陥るならば理想的ではありません。非常に巨大なSYNCは、slonプロセスを落としてしまうかもしれません。再起動後に再度処理しようとしても、同じSYNCに出くわすので同じ問題に再度遭遇します。このある種の「デッドロック」は管理者が -g による設定値を変更するまで繰り返されます。</P
><P
>      <span class="ORIGIN">In <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> version 1.1 and later versions, the <SPAN
CLASS="APPLICATION"
>slon</SPAN
>
      instead adaptively <SPAN
CLASS="QUOTE"
>"ramps up"</SPAN
> from doing 1
      <TT
CLASS="COMMAND"
>SYNC</TT
> at a time towards the maximum group
      size.  As a result, if there are a couple of
      <TT
CLASS="COMMAND"
>SYNC</TT
>s that cause problems, the
      <SPAN
CLASS="APPLICATION"
>slon</SPAN
> will (with any relevant watchdog
      assistance) always be able to get to the point where it
      processes the troublesome <TT
CLASS="COMMAND"
>SYNC</TT
>s one by one,
      hopefully making operator assistance unnecessary.
     </span> Slony-Iバージョン1.1とそれ以降では、slonはこの代わりに、グループが最大数に達すると適宜SYNCを「取り上げ」ます。この結果、問題を発生させるようなSYNCがいくつかあっても、slonはそれらを１個ずつ処理していき、管理者の手を煩わさないようになります。</P
></DD
><DT
><TT
CLASS="OPTION"
>-o</TT
><TT
CLASS="REPLACEABLE"
><I
> desired sync time</I
></TT
></DT
><DD
><P
> <span class="ORIGIN">A <SPAN
CLASS="QUOTE"
>"maximum"</SPAN
> time planned for grouped <TT
CLASS="COMMAND"
>SYNC</TT
>s.</span> グループ化されたSYNCを処理する「最大の」時間です。</P
><P
> <span class="ORIGIN">If replication is running behind, slon will gradually
     increase the numbers of <TT
CLASS="COMMAND"
>SYNC</TT
>s grouped
     together, targetting that (based on the time taken for the
     <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>last</I
></SPAN
> group of <TT
CLASS="COMMAND"
>SYNC</TT
>s) they
     shouldn't take more than the specified
     <TT
CLASS="ENVAR"
>desired_sync_time</TT
> value.</P
><P
> The default value for <TT
CLASS="ENVAR"
>desired_sync_time</TT
> is
     60000ms, equal to one minute. </span> レプリケーションに遅延があると、<TT CLASS="ENVAR">desired_sync_time</TT> を超えない範囲でslonは徐々にSYNCのグループ構成数を増やしていきます。この判断は最後に処理されたSYNCグループに要した時間によって下されます。デフォルト値は60000ミリ秒、即ち1分です。</P
><P
> <span class="ORIGIN">That way, you can expect (or at least hope!) that you'll
      get a <TT
CLASS="COMMAND"
>COMMIT</TT
> roughly once per minute. </span> このようにして、おおよそ1分に1回以上はコミットされることを期待することができます。</P
><P
> <span class="ORIGIN">It isn't <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>totally</I
></SPAN
> predictable, as it
     is entirely possible for someone to request a <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>very
     large update,</I
></SPAN
> all as one transaction, that can
     <SPAN
CLASS="QUOTE"
>"blow up"</SPAN
> the length of the resulting
     <TT
CLASS="COMMAND"
>SYNC</TT
> to be nearly arbitrarily long.  In such a
     case, the heuristic will back off for the
     <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>next</I
></SPAN
> group.</span> 巨大な更新を1つのトランザクションで行うことは可能であり、SYNC処理の時間を跳ね上げることができてしまうため、これは完全に予言することはできません。このような場合は、次のSYNCグループの処理に影響が出ます。</P
><P
> <span class="ORIGIN">The overall effect is to improve
      <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
>'s ability to cope with
      variations in traffic.  By starting with 1 <TT
CLASS="COMMAND"
>SYNC</TT
>, and gradually
      moving to more, even if there turn out to be variations large
      enough to cause <SPAN
CLASS="PRODUCTNAME"
>PostgreSQL</SPAN
> backends to
      crash, <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> will back off down to
      start with one sync at a time, if need be, so that if it is at
      all possible for replication to progress, it will.</span> これら全体で得られる効果は、Slony-Iの様々なトラフィックへの対応能力を向上させることです。設定値は1から始まって徐々に増加していきますが、PostgreSQL本体をクラッシュさせるほど大きな更新に遭遇しても、Slony-Iは一旦終了した後に必要があれば1つずつ同期させていき、レプリケーションは可能であれば続行します。</P
></DD
><DT
><TT
CLASS="OPTION"
>-c</TT
><TT
CLASS="REPLACEABLE"
><I
> cleanup cycles</I
></TT
></DT
><DD
><P
>      <span class="ORIGIN">The value <TT
CLASS="ENVAR"
>vac_frequency</TT
> indicates how often to
      <TT
CLASS="COMMAND"
>VACUUM</TT
> in cleanup cycles.
     </span> <TT class="ENVAR">vac_frequency</TT> はVACUUMの頻度を設定します。</P
><P
>      <span class="ORIGIN">Set this to zero to disable
      <SPAN
CLASS="APPLICATION"
>slon</SPAN
>-initiated vacuuming. If you are
      using something like <SPAN
CLASS="APPLICATION"
>pg_autovacuum</SPAN
> to
      initiate vacuums, you may not need for slon to initiate vacuums
      itself.  If you are not, there are some tables
      <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> uses that collect a
      <SPAN
CLASS="emphasis"
><I
CLASS="EMPHASIS"
>lot</I
></SPAN
> of dead tuples that should be vacuumed
      frequently, notably <TT
CLASS="ENVAR"
>pg_listener</TT
>.
     </span> これを0に設定すると、slon契機のVACUUM処理は無効になります。pg_qutovacuumなどのVACUUM処理をするものを何か利用しているのであれば、slonにそれをさせる必要はありません。利用していないのであれば、特に pg_listener といったテーブルにはSlony-Iが利用したデータの残骸が大量に残されますので、頻繁にVACUUMすることが必要です。</P
><P
> <span class="ORIGIN">In <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> version 1.1, this changes a little; the
     cleanup thread tracks, from iteration to iteration, the earliest
     transaction ID still active in the system.  If this doesn't
     change, from one iteration to the next, then an old transaction
     is still active, and therefore a <TT
CLASS="COMMAND"
>VACUUM</TT
> will
     do no good.  The cleanup thread instead merely does an
     <TT
CLASS="COMMAND"
>ANALYZE</TT
> on these tables to update the
     statistics in <TT
CLASS="ENVAR"
>pg_statistics</TT
>.
     </span> Slony-Iバージョン1.1では、この動作は少し変更になりました。クリーンアップ・スレッドはPostgreSQLで最も古くから活動しているトランザクションを追跡します。もし「最も古いトランザクション」が交代していないのであれば、VACUUMは良い結果をもたらしません。その代わりにANALYZEを実行してpg_statisticsの統計情報を更新します。</P
></DD
><DT
><TT
CLASS="OPTION"
>-p</TT
><TT
CLASS="REPLACEABLE"
><I
> PID filename</I
></TT
></DT
><DD
><P
>      <span class="ORIGIN"><TT
CLASS="ENVAR"
>pid_file</TT
> contains the filename in which the PID
      (process ID) of the <SPAN
CLASS="APPLICATION"
>slon</SPAN
> is stored.
     </span> slon のPID（プロセスID）のファイルの配置場所を <TT CLASS="ENVAR">pid_file</TT> で指定します。</P
><P
>      <span class="ORIGIN">This may make it easier to construct scripts to monitor multiple
      <SPAN
CLASS="APPLICATION"
>slon</SPAN
> processes running on a single
      host.
     </span> この設定によって、スクリプトを書く際にslonの二重起動を防止するのが簡単になります。</P
></DD
><DT
><TT
CLASS="OPTION"
>-f</TT
><TT
CLASS="REPLACEABLE"
><I
> config file</I
></TT
></DT
><DD
><P
>      <span class="ORIGIN">File from which to read <SPAN
CLASS="APPLICATION"
>slon</SPAN
> configuration.
     </span> slonが設定を読み込むファイルを指定します。</P
><P
> <span class="ORIGIN">This configuration is  discussed  further  in <A
HREF="runtime-config.html"
>Slon  Run-time Configuration</A
>. If there are to be a complex set of
     configuration parameters, or if there are parameters you do not
     wish to be visible in the process environment variables (such as
     passwords), it may be convenient to draw many or all parameters
     from a configuration file.  You might either put common
     parameters for all slon processes in a commonly-used
     configuration file, allowing the command line to specify little
     other than the connection info.  Alternatively, you might create
     a configuration file for each node.</span> 設定について詳しくは <A HREF="runtime-config.html">slon 実行時設定</A> を参照して下さい。複雑な組み合わせの設定を行ったり、パスワードのような環境変数などで見せたくない設定値を設定したい場合は、この設定ファイルを用いると便利でしょう。接続設定以外の情報を複数のslonで共有するファイルに書くのも便利です。代わりに、各ノードに固有の設定ファイルを配置するのも良いでしょう。</P
></DD
><DT
><TT
CLASS="OPTION"
>-a</TT
><TT
CLASS="REPLACEABLE"
><I
> archive directory</I
></TT
></DT
><DD
><P
>      <span class="ORIGIN"><TT
CLASS="ENVAR"
>archive_dir</TT
> indicates a directory in which to
      place a sequence of <TT
CLASS="COMMAND"
>SYNC</TT
> archive files for
      use in <A
HREF="logshipping.html"
>log shipping</A
> mode.
     </span> <TT CLASS="ENVAR">archive_dir</TT> は、<A HREF="logshipping.html">ログシッピング</A>モードで稼働させる際の、SYNCアーカイブの置き場所を指定します。</P
></DD
><DT
><TT
CLASS="OPTION"
>-x</TT
><TT
CLASS="REPLACEABLE"
><I
> command to run on log archive</I
></TT
></DT
><DD
><P
>      <span class="ORIGIN"><TT
CLASS="ENVAR"
>command_on_logarchive</TT
> indicates a command to be run 
      each time a SYNC file is successfully generated.
     </span> <TT class="ENVAR">command_on_logarchive</TT> ではSYNCのアーカイブが正常に作成されたときに呼び出されるコマンドを指定します。</P
><P
> <span class="ORIGIN">See more details on <A
HREF="slon-archive-logging.html#SLON-CONFIG-COMMAND-ON-LOGARCHIVE"
>slon_conf_command_on_log_archive</A
>.</span> 詳しくは <A HREF="slon-archive-logging.html#SLON-CONFIG-COMMAND-ON-LOGARCHIVE">slon_conf_command_on_log_archive</A> を参照して下さい。</P
></DD
><DT
><TT
CLASS="OPTION"
>-q</TT
><TT
CLASS="REPLACEABLE"
><I
> quit based on SYNC provider </I
></TT
></DT
><DD
><P
>      <span class="ORIGIN"><TT
CLASS="ENVAR"
>quit_sync_provider</TT
> indicates which provider's
      worker thread should be watched in order to terminate after a
      certain event.  This must be used in conjunction with the
      <TT
CLASS="OPTION"
>-r</TT
> option below...
     </span> <TT CLASS="ENVAR">quit_sync_provider</TT> は、あるイベント（後続の -r オプションで指定）が発生した際に終了させるために監視する、プロバイダのスレッドを指定します。この設定は必ず -r オプションと一緒に使用されなければなりません。</P
><P
> <span class="ORIGIN">This allows you to have a <SPAN
CLASS="APPLICATION"
>slon</SPAN
>
     stop replicating after a certain point. </span> この設定によって、ある時点でレプリケーションを停止させることが可能になります。</P
></DD
><DT
><TT
CLASS="OPTION"
>-r</TT
><TT
CLASS="REPLACEABLE"
><I
> quit at event number </I
></TT
></DT
><DD
><P
>      <span class="ORIGIN"><TT
CLASS="ENVAR"
>quit_sync_finalsync</TT
> indicates the event number
      after which the remote worker thread for the provider above
      should terminate.  This must be used in conjunction with the
      <TT
CLASS="OPTION"
>-q</TT
> option above...
     </span> <TT CLASS="ENVAR">quit_sync_finalsync</TT> はプロバイダのスレッドを停止させる条件となるイベント番号を指定します。このオプションは必ず -q と一緒に指定されなければなりません。</P
></DD
><DT
><TT
CLASS="OPTION"
>-l</TT
><TT
CLASS="REPLACEABLE"
><I
> lag interval </I
></TT
></DT
><DD
><P
>      <span class="ORIGIN"><TT
CLASS="ENVAR"
>lag_interval</TT
> indicates an interval value such as
      <TT
CLASS="COMMAND"
> 3 minutes </TT
> or <TT
CLASS="COMMAND"
> 4 hours </TT
>
      or <TT
CLASS="COMMAND"
> 2 days </TT
> that indicates that this node is
      to lag its providers by the specified interval of time.  This
      causes events to be ignored until they reach the age
      corresponding to the interval.
     </span> <TT CLASS="ENVAR">lag_interval</TT> は 3 minutes や 4 hours や 2 days といった形で指定し、その時間だけプロバイダよりも遅延します。これは、指定された時間に達するまでイベントを無視し続けるということです。</P
><DIV
CLASS="WARNING"
><P
></P
><TABLE
CLASS="WARNING"
BORDER="1"
WIDTH="90%"
><TR
><TD
ALIGN="CENTER"
><B
><span class="ORIGIN">Warning</span> 警告</B
></TD
></TR
><TR
><TD
ALIGN="LEFT"
><P
> <span class="ORIGIN">There is a concommittant downside to this lag;
     events that require all nodes to synchronize, as typically
     happens with <A
HREF="stmtfailover.html"
>SLONIK FAILOVER</A
> and <A
HREF="stmtmoveset.html"
>SLONIK MOVE SET</A
>, will have to wait for this lagging
     node. </span>  この遅延については、注意しなければならない現象があります。全てのノードが同時に処理しなければならないもの、例えば <A HREF="stmtfailover.html">SLONIK FAILOVER</A> や <A HREF="stmtmoveset.html">SLONIK MOVE SET</A> は遅延しているノードに合わせて待たなければなりません。</P
><P
> <span class="ORIGIN">That might not be ideal behaviour at failover time, or at
     the time when you want to run <A
HREF="stmtddlscript.html"
>SLONIK EXECUTE SCRIPT</A
>. </span>これはフェイルオーバや <A HREF="stmtddlscript.html">SLONIK EXECUTE SCRIPT</A> の動作としては理想的ではないでしょう。</P
></TD
></TR
></TABLE
></DIV
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN8445"
></A
><H2
><span class="ORIGIN">Exit Status</span> 終了時の状態</H2
><P
>   <span class="ORIGIN"><SPAN
CLASS="APPLICATION"
>slon</SPAN
> returns 0 to the shell if it
   finished normally.  It returns via <CODE
CLASS="FUNCTION"
>exit(-1)</CODE
>
   (which will likely provide a return value of either 127 or 255,
   depending on your system) if it encounters any fatal error.
  </span> slonは正常に終了するとシェルに0を返します。何か致命的なエラーによって終了する場合は exit(-1) によって終了します。これは処理系によっては127だったり255といった値で処理されるかもしれません。</P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="commandreference.html"
ACCESSKEY="P"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="runtime-config.html"
ACCESSKEY="N"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Core <SPAN
CLASS="PRODUCTNAME"
>Slony-I</SPAN
> Programs</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="commandreference.html"
ACCESSKEY="U"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
></TD
></TR
></TABLE
></DIV
></BODY
></HTML
>